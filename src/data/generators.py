"""Data generators for exercises, supplements, and nutrition knowledge."""
import json
from pathlib import Path
from typing import List, Dict


def generate_exercises_data() -> List[Dict]:
    """Generate a comprehensive database of exercises."""
    exercises = [
        # Chest exercises
        {
            "name": "Жим штанги лежа",
            "muscle_groups": ["грудь", "трицепс", "передние дельты"],
            "equipment": ["штанга", "скамья"],
            "difficulty": "intermediate",
            "description": "Базовое упражнение для развития грудных мышц. Выполняется лежа на горизонтальной скамье.",
            "technique_points": [
                "Опускайте штангу до касания груди в области сосков",
                "Держите лопатки сведенными",
                "Стопы плотно прижаты к полу",
                "Контролируйте движение в обе фазы",
                "Не отрывайте таз от скамьи"
            ],
            "video_keywords": ["bench press technique", "proper bench press form"]
        },
        {
            "name": "Отжимания от пола",
            "muscle_groups": ["грудь", "трицепс", "кор"],
            "equipment": ["собственный вес"],
            "difficulty": "beginner",
            "description": "Классическое упражнение с собственным весом для груди и трицепсов.",
            "technique_points": [
                "Держите тело прямым от головы до пяток",
                "Руки на ширине плеч или чуть шире",
                "Опускайтесь до касания грудью пола",
                "Локти под углом 45 градусов к телу",
                "Не прогибайтесь в пояснице"
            ],
            "video_keywords": ["perfect push up form", "push up tutorial"]
        },
        {
            "name": "Разводка гантелей лежа",
            "muscle_groups": ["грудь"],
            "equipment": ["гантели", "скамья"],
            "difficulty": "intermediate",
            "description": "Изолирующее упражнение для растяжки и развития грудных мышц.",
            "technique_points": [
                "Слегка согнутые локти на протяжении движения",
                "Контролируйте вес, не опускайте слишком низко",
                "Сводите гантели над грудью",
                "Чувствуйте растяжение грудных мышц",
                "Не используйте слишком большой вес"
            ],
            "video_keywords": ["dumbbell fly form", "chest fly technique"]
        },
        
        # Back exercises
        {
            "name": "Подтягивания",
            "muscle_groups": ["спина", "бицепс"],
            "equipment": ["перекладина"],
            "difficulty": "intermediate",
            "description": "Лучшее упражнение для развития ширины спины и силы верхней части тела.",
            "technique_points": [
                "Полная амплитуда движения - от полного виса до подбородка над перекладиной",
                "Хват шире плеч для широчайших",
                "Сводите лопатки в верхней точке",
                "Избегайте раскачивания тела",
                "Контролируйте опускание"
            ],
            "video_keywords": ["proper pull up form", "pull up technique"]
        },
        {
            "name": "Становая тяга",
            "muscle_groups": ["спина", "ноги", "ягодицы", "кор"],
            "equipment": ["штанга"],
            "difficulty": "advanced",
            "description": "Король упражнений. Задействует практически все мышцы тела.",
            "technique_points": [
                "Держите спину прямой на протяжении всего движения",
                "Штанга двигается вертикально близко к голеням",
                "Начинайте движение с ног, затем разгибайте спину",
                "Держите голову в нейтральном положении",
                "Не округляйте поясницу"
            ],
            "video_keywords": ["deadlift form", "proper deadlift technique"]
        },
        {
            "name": "Тяга штанги в наклоне",
            "muscle_groups": ["спина", "трапеции", "бицепс"],
            "equipment": ["штанга"],
            "difficulty": "intermediate",
            "description": "Отличное упражнение для толщины спины и развития средней части.",
            "technique_points": [
                "Наклон корпуса около 45 градусов",
                "Тяните штангу к нижней части живота",
                "Сводите лопатки в конечной точке",
                "Держите кор напряженным",
                "Не используйте инерцию"
            ],
            "video_keywords": ["barbell row form", "bent over row technique"]
        },
        
        # Leg exercises
        {
            "name": "Приседания со штангой",
            "muscle_groups": ["квадрицепс", "ягодицы", "бицепс бедра", "кор"],
            "equipment": ["штанга", "стойки"],
            "difficulty": "intermediate",
            "description": "Базовое упражнение для ног. Развивает силу и массу нижней части тела.",
            "technique_points": [
                "Опускайтесь до параллели бедер с полом или ниже",
                "Колени направлены в сторону носков",
                "Держите спину прямой",
                "Вес на пятках",
                "Смотрите вперед, не вниз"
            ],
            "video_keywords": ["squat form", "proper squat technique"]
        },
        {
            "name": "Выпады",
            "muscle_groups": ["квадрицепс", "ягодицы", "бицепс бедра"],
            "equipment": ["гантели", "штанга", "собственный вес"],
            "difficulty": "beginner",
            "description": "Одностороннее упражнение для ног, улучшает баланс и координацию.",
            "technique_points": [
                "Колено передней ноги не выходит за носок",
                "Опускайтесь до касания коленом задней ноги пола",
                "Держите корпус вертикально",
                "Равномерно распределяйте вес",
                "Отталкивайтесь пяткой передней ноги"
            ],
            "video_keywords": ["lunge form", "proper lunge technique"]
        },
        {
            "name": "Румынская тяга",
            "muscle_groups": ["бицепс бедра", "ягодицы", "поясница"],
            "equipment": ["штанга", "гантели"],
            "difficulty": "intermediate",
            "description": "Изолирующее упражнение для задней поверхности бедра и ягодиц.",
            "technique_points": [
                "Слегка согнутые колени на протяжении движения",
                "Опускайте штангу вдоль голеней",
                "Чувствуйте растяжение бицепса бедра",
                "Не округляйте спину",
                "Сводите лопатки"
            ],
            "video_keywords": ["romanian deadlift form", "RDL technique"]
        },
        
        # Shoulder exercises
        {
            "name": "Жим штанги стоя",
            "muscle_groups": ["передние дельты", "средние дельты", "трицепс"],
            "equipment": ["штанга"],
            "difficulty": "intermediate",
            "description": "Базовое упражнение для развития силы и массы плеч.",
            "technique_points": [
                "Выжимайте штангу строго вертикально",
                "Держите кор напряженным",
                "Не прогибайтесь в пояснице",
                "Полная амплитуда - от ключиц до выпрямленных рук",
                "Контролируйте опускание"
            ],
            "video_keywords": ["overhead press form", "military press technique"]
        },
        {
            "name": "Подъемы гантелей в стороны",
            "muscle_groups": ["средние дельты"],
            "equipment": ["гантели"],
            "difficulty": "beginner",
            "description": "Изолирующее упражнение для средних пучков дельт, создает ширину плеч.",
            "technique_points": [
                "Поднимайте гантели в стороны до уровня плеч",
                "Слегка согнутые локти",
                "Не раскачивайтесь",
                "Контролируйте опускание",
                "Не поднимайте плечи вверх"
            ],
            "video_keywords": ["lateral raise form", "side delt raise"]
        },
        
        # Arm exercises
        {
            "name": "Подъем штанги на бицепс",
            "muscle_groups": ["бицепс"],
            "equipment": ["штанга"],
            "difficulty": "beginner",
            "description": "Классическое упражнение для развития бицепса.",
            "technique_points": [
                "Локти прижаты к корпусу",
                "Не раскачивайтесь",
                "Полная амплитуда движения",
                "Контролируйте опускание",
                "Сжимайте бицепс в верхней точке"
            ],
            "video_keywords": ["barbell curl form", "bicep curl technique"]
        },
        {
            "name": "Жим лежа узким хватом",
            "muscle_groups": ["трицепс", "грудь"],
            "equipment": ["штанга", "скамья"],
            "difficulty": "intermediate",
            "description": "Отличное упражнение для массы и силы трицепса.",
            "technique_points": [
                "Хват на ширине плеч",
                "Локти близко к корпусу",
                "Опускайте к нижней части груди",
                "Полный диапазон движения",
                "Контролируйте вес"
            ],
            "video_keywords": ["close grip bench press", "tricep press form"]
        },
        
        # Core exercises
        {
            "name": "Планка",
            "muscle_groups": ["кор", "пресс"],
            "equipment": ["собственный вес"],
            "difficulty": "beginner",
            "description": "Изометрическое упражнение для укрепления мышц кора.",
            "technique_points": [
                "Тело образует прямую линию",
                "Локти под плечами",
                "Напрягите ягодицы и кор",
                "Не провисайте в пояснице",
                "Дышите ровно"
            ],
            "video_keywords": ["plank form", "proper plank technique"]
        },
        {
            "name": "Скручивания",
            "muscle_groups": ["пресс"],
            "equipment": ["собственный вес"],
            "difficulty": "beginner",
            "description": "Базовое упражнение для прямой мышцы живота.",
            "technique_points": [
                "Поднимайте только лопатки от пола",
                "Не тяните руками за голову",
                "Контролируйте движение",
                "Выдох на подъеме",
                "Не отрывайте поясницу от пола"
            ],
            "video_keywords": ["crunch form", "ab crunch technique"]
        }
    ]
    
    return exercises


def generate_supplements_data() -> List[Dict]:
    """Generate a comprehensive database of supplements."""
    supplements = [
        {
            "name": "Креатин моногидрат",
            "category": "Производительность",
            "benefits": [
                "Увеличение силы и мощности",
                "Ускорение восстановления между подходами",
                "Увеличение мышечной массы",
                "Улучшение высокоинтенсивной работы"
            ],
            "dosage": "3-5 граммов в день",
            "timing": "В любое время дня, можно с едой для лучшего усвоения",
            "contraindications": [
                "Заболевания почек",
                "Аллергия на креатин"
            ],
            "evidence_level": "high",
            "notes": "Самая изученная спортивная добавка. Загрузка не требуется. Может вызвать задержку воды.",
            "interactions": "Безопасен с большинством добавок"
        },
        {
            "name": "Сывороточный протеин",
            "category": "Белок",
            "benefits": [
                "Удобный источник качественного белка",
                "Быстрое усвоение",
                "Поддержка роста и восстановления мышц",
                "Помощь в достижении дневной нормы белка"
            ],
            "dosage": "20-40 граммов на порцию, в зависимости от общей потребности в белке",
            "timing": "После тренировки, между приемами пищи, или для достижения дневной нормы белка",
            "contraindications": [
                "Лактозная непереносимость (выбирайте изолят)",
                "Аллергия на молочные продукты"
            ],
            "evidence_level": "high",
            "notes": "Не обязателен, если достигаете нормы белка из пищи (1.6-2.2 г/кг). Важнее общее количество белка, чем тип.",
            "interactions": "Безопасен с другими добавками"
        },
        {
            "name": "Кофеин",
            "category": "Производительность и энергия",
            "benefits": [
                "Повышение энергии и бодрости",
                "Улучшение фокуса и концентрации",
                "Увеличение выносливости",
                "Может снижать восприятие усталости"
            ],
            "dosage": "100-300 мг за 30-60 минут до тренировки (3-6 мг/кг веса тела)",
            "timing": "За 30-60 минут до тренировки, избегать после 14:00 для хорошего сна",
            "contraindications": [
                "Чувствительность к кофеину",
                "Тревожность",
                "Проблемы со сном",
                "Гипертония"
            ],
            "evidence_level": "high",
            "notes": "Очень эффективен для большинства. Толерантность развивается при ежедневном употреблении. Циклируйте при необходимости.",
            "interactions": "Осторожно с другими стимуляторами"
        },
        {
            "name": "Бета-аланин",
            "category": "Производительность",
            "benefits": [
                "Увеличение мышечной выносливости",
                "Снижение усталости при высокоинтенсивных упражнениях",
                "Буферизация молочной кислоты"
            ],
            "dosage": "2-5 граммов в день",
            "timing": "Ежедневно, время не критично. Эффект накопительный.",
            "contraindications": [
                "Редкие случаи аллергии"
            ],
            "evidence_level": "medium",
            "notes": "Вызывает покалывание кожи (парестезия) - это нормально и безопасно. Эффективен для упражнений длительностью 1-4 минуты.",
            "interactions": "Хорошо сочетается с креатином"
        },
        {
            "name": "Омега-3 (EPA/DHA)",
            "category": "Здоровье",
            "benefits": [
                "Поддержка здоровья сердца",
                "Уменьшение воспаления",
                "Поддержка функции мозга",
                "Может помочь в восстановлении"
            ],
            "dosage": "1-3 грамма EPA+DHA в день",
            "timing": "С едой для лучшего усвоения",
            "contraindications": [
                "Аллергия на рыбу",
                "Нарушения свертываемости крови (консультация врача)",
                "Прием антикоагулянтов"
            ],
            "evidence_level": "high",
            "notes": "Важнее для общего здоровья, чем для прямого улучшения результатов. Выбирайте качественные бренды с сертификатами чистоты.",
            "interactions": "Осторожно с антикоагулянтами"
        },
        {
            "name": "Цитруллин малат",
            "category": "Производительность",
            "benefits": [
                "Увеличение кровотока (пампинг)",
                "Снижение усталости",
                "Улучшение выносливости",
                "Ускорение восстановления"
            ],
            "dosage": "6-8 граммов за 30-60 минут до тренировки",
            "timing": "Перед тренировкой",
            "contraindications": [
                "Редкие случаи расстройства ЖКТ"
            ],
            "evidence_level": "medium",
            "notes": "Более эффективен, чем аргинин для повышения оксида азота. Хорошо переносится большинством.",
            "interactions": "Безопасен с другими добавками"
        },
        {
            "name": "Витамин D3",
            "category": "Здоровье",
            "benefits": [
                "Поддержка иммунитета",
                "Здоровье костей",
                "Может улучшить производство тестостерона",
                "Важен для общего здоровья"
            ],
            "dosage": "1000-4000 МЕ в день (проверьте уровень анализом)",
            "timing": "С жирной пищей для лучшего усвоения",
            "contraindications": [
                "Гиперкальциемия",
                "Камни в почках (осторожно)"
            ],
            "evidence_level": "high",
            "notes": "Дефицит очень распространен, особенно в северных широтах. Рекомендуется сдать анализ для определения дозировки.",
            "interactions": "Безопасен с другими добавками"
        },
        {
            "name": "BCAA (Аминокислоты с разветвленной цепью)",
            "category": "Белок",
            "benefits": [
                "Может уменьшить разрушение мышц",
                "Возможное ускорение восстановления"
            ],
            "dosage": "5-10 граммов до/во время тренировки",
            "timing": "До или во время тренировки",
            "contraindications": [
                "БАС (боковой амиотрофический склероз)"
            ],
            "evidence_level": "low",
            "notes": "НЕ НУЖНЫ, если получаете достаточно белка из пищи или протеиновых коктейлей. Сывороточный протеин уже содержит BCAA. Экономьте деньги.",
            "interactions": "Безопасны с другими добавками"
        },
        {
            "name": "Магний",
            "category": "Здоровье",
            "benefits": [
                "Улучшение качества сна",
                "Поддержка мышечной функции",
                "Снижение стресса",
                "Поддержка восстановления"
            ],
            "dosage": "200-400 мг элементарного магния",
            "timing": "Вечером перед сном",
            "contraindications": [
                "Заболевания почек",
                "Нарушения сердечного ритма (консультация врача)"
            ],
            "evidence_level": "medium",
            "notes": "Дефицит распространен. Магния цитрат/глицинат усваиваются лучше, чем оксид. Может иметь слабительный эффект при высоких дозах.",
            "interactions": "Может влиять на усвоение некоторых антибиотиков"
        },
        {
            "name": "Предтренировочный комплекс",
            "category": "Производительность",
            "benefits": [
                "Повышение энергии",
                "Улучшение фокуса",
                "Увеличение выносливости",
                "Усиление пампинга"
            ],
            "dosage": "Согласно инструкции (обычно 1 мерная ложка)",
            "timing": "За 20-30 минут до тренировки",
            "contraindications": [
                "Чувствительность к стимуляторам",
                "Гипертония",
                "Проблемы с сердцем"
            ],
            "evidence_level": "medium",
            "notes": "Качество сильно варьируется. Проверяйте состав - ищите креатин, бета-аланин, кофеин, цитруллин. Избегайте проприетарных смесей. Можете собрать свой из отдельных ингредиентов дешевле.",
            "interactions": "Избегайте дополнительного кофеина"
        }
    ]
    
    return supplements


def generate_nutrition_data() -> List[Dict]:
    """Generate nutrition guidelines and knowledge base."""
    nutrition_knowledge = [
        {
            "topic": "Базовые принципы питания для набора массы",
            "content": """
            Для набора мышечной массы необходимо:
            
            1. КАЛОРИЙНЫЙ ПРОФИЦИТ: потребляйте на 300-500 ккал больше вашей нормы
            2. БЕЛОК: 1.6-2.2 г на кг массы тела ежедневно
            3. УГЛЕВОДЫ: 4-7 г на кг для энергии и восстановления
            4. ЖИРЫ: 0.5-1.5 г на кг для гормонального здоровья
            5. Приоритет цельным продуктам, но калории важнее "чистоты"
            """,
            "tags": ["muscle_gain", "basics", "macros"]
        },
        {
            "topic": "Базовые принципы питания для похудения",
            "content": """
            Для снижения веса необходимо:
            
            1. КАЛОРИЙНЫЙ ДЕФИЦИТ: 300-500 ккал ниже нормы для устойчивого результата
            2. ВЫСОКИЙ БЕЛОК: 2.0-2.5 г на кг для сохранения мышц
            3. Оставшиеся калории распределите между углеводами и жирами по предпочтениям
            4. Не урезайте калории слишком сильно (не более 20-25% от нормы)
            5. Ешьте продукты, которые насыщают: белок, клетчатка, объемная пища
            """,
            "tags": ["weight_loss", "basics", "deficit"]
        },
        {
            "topic": "Распределение белка в течение дня",
            "content": """
            Оптимальное распределение белка:
            
            1. 3-5 приемов пищи с белком в день
            2. 20-40 г качественного белка на прием для максимального синтеза белка
            3. Белок перед сном: 30-40 г казеина или творога для ночного восстановления
            4. Белок после тренировки в течение 2-3 часов (не обязательно сразу)
            5. Общее количество за день важнее, чем время приема
            """,
            "tags": ["protein", "meal_timing", "muscle_gain"]
        },
        {
            "topic": "Питание вокруг тренировки",
            "content": """
            Оптимизация питания для тренировок:
            
            ДО ТРЕНИРОВКИ (за 2-3 часа):
            - Углеводы + умеренный белок
            - Низкое содержание жиров и клетчатки
            - Пример: рис с курицей, овсянка с протеином
            
            ПЕРЕД ТРЕНИРОВКОЙ (за 30-60 мин):
            - Легкоусвояемые углеводы при необходимости
            - Пример: банан, энергетический батончик
            
            ПОСЛЕ ТРЕНИРОВКИ (в течение 2-3 часов):
            - Белок (20-40 г) + углеводы для восстановления гликогена
            - Соотношение углеводов к белку 2:1 до 4:1 в зависимости от интенсивности
            - Пример: протеиновый коктейль с фруктами, курица с рисом
            """,
            "tags": ["meal_timing", "performance", "recovery"]
        },
        {
            "topic": "Гидратация для спортсменов",
            "content": """
            Рекомендации по потреблению жидкости:
            
            ЕЖЕДНЕВНО:
            - Базовая норма: 30-40 мл на кг веса тела
            - Дополнительно 500-1000 мл на каждый час интенсивной тренировки
            
            ВОКРУГ ТРЕНИРОВКИ:
            - За 2-3 часа до: 400-600 мл воды
            - Во время: 200-300 мл каждые 15-20 минут
            - После: возместите 150% потерянной жидкости (взвесьтесь до и после)
            
            ПРИЗНАКИ ОБЕЗВОЖИВАНИЯ:
            - Темная моча
            - Сухость во рту
            - Снижение производительности
            - Головная боль
            """,
            "tags": ["hydration", "performance", "recovery"]
        },
        {
            "topic": "Лучшие источники макронутриентов",
            "content": """
            КАЧЕСТВЕННЫЕ ИСТОЧНИКИ БЕЛКА:
            - Курица, индейка, нежирная говядина
            - Рыба (лосось, тунец, треска)
            - Яйца
            - Греческий йогурт, творог
            - Бобовые (чечевица, фасоль)
            - Тофу, темпе
            
            КАЧЕСТВЕННЫЕ УГЛЕВОДЫ:
            - Рис (белый и бурый)
            - Овсянка
            - Картофель, батат
            - Киноа, гречка
            - Фрукты (бананы, ягоды)
            - Цельнозерновой хлеб и макароны
            
            ЗДОРОВЫЕ ЖИРЫ:
            - Авокадо
            - Орехи и семена
            - Оливковое масло
            - Жирная рыба
            - Яичные желтки
            - Ореховые масла
            """,
            "tags": ["food_sources", "macros", "nutrition"]
        },
        {
            "topic": "Микронутриенты для спортсменов",
            "content": """
            Важные микронутриенты для тренирующихся:
            
            ЖЕЛЕЗО: важно для транспорта кислорода
            - Источники: красное мясо, шпинат, бобовые
            - Вегетарианцам особенно важно мониторить
            
            КАЛЬЦИЙ и ВИТАМИН D: здоровье костей
            - Молочные продукты, листовая зелень
            - Витамин D часто требует добавок
            
            ЦИНК: иммунитет и восстановление
            - Мясо, морепродукты, орехи
            
            ВИТАМИНЫ ГРУППЫ B: энергетический метаболизм
            - Цельные зерна, мясо, яйца
            
            АНТИОКСИДАНТЫ (C, E): восстановление
            - Ягоды, цитрусовые, орехи, овощи
            """,
            "tags": ["micronutrients", "health", "recovery"]
        },
        {
            "topic": "Мифы о питании в фитнесе",
            "content": """
            Развенчиваем популярные мифы:
            
            МИФ: "Нужно есть каждые 2-3 часа для метаболизма"
            ФАКТ: Частота приемов пищи не влияет на метаболизм. Важно общее количество калорий.
            
            МИФ: "Углеводы вечером превращаются в жир"
            ФАКТ: Время приема углеводов не критично. Важен общий баланс калорий.
            
            МИФ: "Нужно пить протеин сразу после тренировки (анаболическое окно)"
            ФАКТ: Окно длится 2-3 часа, а общее количество белка за день важнее.
            
            МИФ: "Детокс и очищение необходимы"
            ФАКТ: Печень и почки прекрасно справляются с детоксикацией.
            
            МИФ: "Читмилы разгоняют метаболизм"
            ФАКТ: Эффект минимален. Психологическая польза может быть выше.
            """,
            "tags": ["myths", "education", "science"]
        }
    ]
    
    return nutrition_knowledge


def save_generated_data(output_dir: Path):
    """Save all generated data to JSON files."""
    exercises = generate_exercises_data()
    supplements = generate_supplements_data()
    nutrition = generate_nutrition_data()
    
    with open(output_dir / "exercises.json", "w", encoding="utf-8") as f:
        json.dump(exercises, f, ensure_ascii=False, indent=2)
    
    with open(output_dir / "supplements.json", "w", encoding="utf-8") as f:
        json.dump(supplements, f, ensure_ascii=False, indent=2)
    
    with open(output_dir / "nutrition.json", "w", encoding="utf-8") as f:
        json.dump(nutrition, f, ensure_ascii=False, indent=2)
    
    print(f"✅ Generated data saved to {output_dir}")
    print(f"   - {len(exercises)} exercises")
    print(f"   - {len(supplements)} supplements")
    print(f"   - {len(nutrition)} nutrition articles")


if __name__ == "__main__":
    from pathlib import Path
    output_dir = Path("data/raw")
    output_dir.mkdir(parents=True, exist_ok=True)
    save_generated_data(output_dir)